<!DOCTYPE html> 
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
        <title>Map of Life</title> 
        <link href="/stylesheets/test.css" media="screen" rel="stylesheet" type="text/css" /> 
        <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Coda">
        <script type="text/javascript" src="http://www.google.com/jsapi?key=ABQIAAAAhejF1IRVaCyeCqxIQjT19BT2yXp_ZAY8_ufC3CFXhHIE1NvwkxQQVdp0qK6LIdtUMkyJyGau2FAr6Q"></script> 
        <script type="text/javascript" src="http://www.google.com/jsapi?key=ABQIAAAAhejF1IRVaCyeCqxIQjT19BQnqYmZFNw176Z9eGZLF4M7kSq-MhQPJ1PZw_xe7fLxFc65vo_OiMHM5A"></script> 
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script> 
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
        <script src="/javascript/gfeed.js" type="text/javascript"></script> 
        <script src="/javascript/gritter.min.js" type="text/javascript"></script> 
        <script type="text/javascript">
            function addOverlay(map){
                var BlueMarble = new google.maps.ImageMapType({
                    getTileUrl: function(coord, zoom) {
                        var x = coord.x;
                        x ^= (coord.x>>zoom<<zoom); 
                        if (x < 0){
                            x += Math.pow(2,zoom);
                        } else if (x >= Math.pow(2,zoom)){
                            x -= Math.pow(2,zoom);
                        }
                        var url = "http://s3.amazonaws.com/com.modestmaps.bluemarble/" + zoom + "-r" + coord.y + "-c" + x + ".jpg"
                        return url;
                    },
                    tileSize: new google.maps.Size(256, 256),
                    isPng: true
                });
                map.overlayMapTypes.push(BlueMarble);
             
            }
            
            function gritterModal(){
                $.gritter.add({
                title: "We're not ready yet",
                text: "The Map of Life is busy getting a large set of base layers and processes developed for our launch. You can follow our <a href='http://mol.colorado.edu/blog'>Blog</a> to stay up to date with our progress.",
                //image: '/static/images/icons/phylobox-80.png',
                sticky: false, 
                time: 4000
                });
            }
            function initialize() {
                //var uLat = google.loader.ClientLocation.latitude;
                //var uLon =  google.loader.ClientLocation.longitude;
                var myLatlng = new google.maps.LatLng(44, 27);
                var myOptions = {
                    center: myLatlng,
                    zoom: 4,
                    disableDefaultUI: true,
                    disableDoubleClickZoom: true,
                    draggable: false
                }
                var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
                addOverlay(map);
                
              
                $('#blog').gFeed({ 
                    url: 'http://mol.colorado.edu/blog/?feed=rss2&a=3',
                    tabs: false,
                    max: 2
                }); 
                
                $('#code').gFeed({ 
                    url: 'https://github.com/andrewxhill/MOL/commits/modularize.atom',
                    tabs: false,
                    max: 3
                }); 
                
                $(".main_link").click(function() {
                    gritterModal();
                });
                
                $(".main_link").hover(function() {
                        $(this).css({ "opacity": 0.85});
                    }, function() {
                        $(this).css({ "opacity": 1.0});
                });
                
                
                
            }
               
            function loadScript() {
              var script = document.createElement("script");
              script.type = "text/javascript";
              script.src = "http://maps.google.com/maps/api/js?sensor=false&callback=initialize";
              document.body.appendChild(script);
            }
              
            window.onload = loadScript;
        </script>
    </head>
    <body>
        <div id="header">
            <div id="title">Map of Life</div>
            <div id="subtitle">infrastructure for integrating global species knowledge</div>
            <div id="menu">
                <div class="item"><a href="/" class="current">Home</a></div>
                <div class="item"><a href="/">Tech</a></div>
                <div class="item"><a href="/">Demo</a></div>
                <div class="item"><a href="/">Contact</a></div>
            </div>
        </div>
        <div id="container">
            <div id="content">hi</div>
        </div>
        <div id="footer"> 
            <div id="footer_links"> 
            </div> 
        </div> 
    </body>
</html>      
